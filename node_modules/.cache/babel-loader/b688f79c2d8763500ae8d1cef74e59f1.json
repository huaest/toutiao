{"remainingRequest":"/Users/yanmaohua/Desktop/toutiao/toutiao/node_modules/thread-loader/dist/cjs.js!/Users/yanmaohua/Desktop/toutiao/toutiao/node_modules/babel-loader/lib/index.js!/Users/yanmaohua/Desktop/toutiao/toutiao/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/yanmaohua/Desktop/toutiao/toutiao/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yanmaohua/Desktop/toutiao/toutiao/src/views/home/components/ArticleList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yanmaohua/Desktop/toutiao/toutiao/src/views/home/components/ArticleList.vue","mtime":1632296861883},{"path":"/Users/yanmaohua/Desktop/toutiao/toutiao/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanmaohua/Desktop/toutiao/toutiao/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanmaohua/Desktop/toutiao/toutiao/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/yanmaohua/Desktop/toutiao/toutiao/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanmaohua/Desktop/toutiao/toutiao/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICIvVXNlcnMveWFubWFvaHVhL0Rlc2t0b3AvdG91dGlhby90b3V0aWFvL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90b0NvbnN1bWFibGVBcnJheSI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICIvVXNlcnMveWFubWFvaHVhL0Rlc2t0b3AvdG91dGlhby90b3V0aWFvL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgQXJ0aWNsZUl0ZW0gZnJvbSAnQC9jb21wb25lbnRzL0FydGljbGVJdGVtL2luZGV4LnZ1ZSc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnQXJ0aWNsZUxpc3QnLAogIHByb3BzOiB7CiAgICBjaGFubmVsOiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0KICB9LAogIGNvbXBvbmVudHM6IHsKICAgIEFydGljbGVJdGVtOiBBcnRpY2xlSXRlbQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGxpc3Q6IFtdLAogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgZmluaXNoZWQ6IGZhbHNlLAogICAgICBjaGFubmVsX2lkOiB0aGlzLmNoYW5uZWwuaWQsCiAgICAgIHRpbWVzdGFtcDogdGhpcy50aW1lc3RhbXAgfHwgRGF0ZS5ub3coKSwKICAgICAgd2l0aF90b3A6IDEsCiAgICAgIGVycm9yOiBmYWxzZSwKICAgICAgaXNSZWZyZXNoaW5nOiBmYWxzZQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8vIG9uTG9hZCgpIHt9LAogICAgb25Mb2FkOiBmdW5jdGlvbiBvbkxvYWQoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciBfdGhpcyRsaXN0LCBfeWllbGQkX3RoaXMkJGF4aW9zJGcsIHJlczsKCiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDA7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy4kYXhpb3MuZ2V0KCd2MV8xL2FydGljbGVzJywgewogICAgICAgICAgICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgICAgICAgICAgICBjaGFubmVsX2lkOiBfdGhpcy5jaGFubmVsLmlkLAogICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogX3RoaXMudGltZXN0YW1wLAogICAgICAgICAgICAgICAgICAgIHdpdGhfdG9wOiBfdGhpcy53aXRoX3RvcAogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgX3lpZWxkJF90aGlzJCRheGlvcyRnID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIHJlcyA9IF95aWVsZCRfdGhpcyQkYXhpb3MkZy5kYXRhOwoKICAgICAgICAgICAgICAgIChfdGhpcyRsaXN0ID0gX3RoaXMubGlzdCkucHVzaC5hcHBseShfdGhpcyRsaXN0LCBfdG9Db25zdW1hYmxlQXJyYXkocmVzLmRhdGEucmVzdWx0cykpOwoKICAgICAgICAgICAgICAgIF90aGlzLmxvYWRpbmcgPSBmYWxzZTsKCiAgICAgICAgICAgICAgICBpZiAocmVzLmRhdGEucmVzdWx0cy5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgX3RoaXMudGltZXN0YW1wID0gcmVzLmRhdGEucHJlX3RpbWVzdGFtcDsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIF90aGlzLmZpbmlzaGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTQ7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAxMDsKICAgICAgICAgICAgICAgIF9jb250ZXh0LnQwID0gX2NvbnRleHRbImNhdGNoIl0oMCk7CiAgICAgICAgICAgICAgICBfdGhpcy5lcnJvciA9IHRydWU7CiAgICAgICAgICAgICAgICBfdGhpcy5sb2FkaW5nID0gZmFsc2U7CgogICAgICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlLCBudWxsLCBbWzAsIDEwXV0pOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBvblJlZnJlc2g6IGZ1bmN0aW9uIG9uUmVmcmVzaCgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICB2YXIgX3RoaXMyJGxpc3QsIF95aWVsZCRfdGhpczIkJGF4aW9zJCwgcmVzOwoKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQyLnByZXYgPSAwOwogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAzOwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMi4kYXhpb3MuZ2V0KCd2MV8xL2FydGljbGVzJywgewogICAgICAgICAgICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgICAgICAgICAgICBjaGFubmVsX2lkOiBfdGhpczIuY2hhbm5lbC5pZCwKICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksCiAgICAgICAgICAgICAgICAgICAgd2l0aF90b3A6IF90aGlzMi53aXRoX3RvcAogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgX3lpZWxkJF90aGlzMiQkYXhpb3MkID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgICAgICByZXMgPSBfeWllbGQkX3RoaXMyJCRheGlvcyQuZGF0YTsKCiAgICAgICAgICAgICAgICAoX3RoaXMyJGxpc3QgPSBfdGhpczIubGlzdCkudW5zaGlmdC5hcHBseShfdGhpczIkbGlzdCwgX3RvQ29uc3VtYWJsZUFycmF5KHJlcy5kYXRhLnJlc3VsdHMpKTsKCiAgICAgICAgICAgICAgICBfdGhpczIuaXNSZWZyZXNoaW5nID0gZmFsc2U7CgogICAgICAgICAgICAgICAgaWYgKHJlcy5kYXRhLnJlc3VsdHMubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzMi50aW1lc3RhbXAgPSByZXMuZGF0YS5wcmVfdGltZXN0YW1wOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgX3RoaXMyLmZpbmlzaGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDE0OwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDEwOwogICAgICAgICAgICAgICAgX2NvbnRleHQyLnQwID0gX2NvbnRleHQyWyJjYXRjaCJdKDApOwogICAgICAgICAgICAgICAgX3RoaXMyLmVycm9yID0gdHJ1ZTsKICAgICAgICAgICAgICAgIF90aGlzMi5sb2FkaW5nID0gZmFsc2U7CgogICAgICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIsIG51bGwsIFtbMCwgMTBdXSk7CiAgICAgIH0pKSgpOwogICAgfQogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHt9Cn07"},{"version":3,"sources":["ArticleList.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"articleList\">\n    <!-- pullfresh 要放在外面 -->\n    <van-pull-refresh\n      v-model=\"isRefreshing\"\n      @refresh=\"onRefresh\"\n      success-duration=\"500\"\n      success-text=\"刷新成功\"\n    >\n      <van-list\n        v-model=\"loading\"\n        :finished=\"finished\"\n        finished-text=\"没有更多了\"\n        :error.sync=\"error\"\n        error-text=\"请求失败，点击重新加载\"\n        @load=\"onLoad\"\n      >\n        <article-item\n          v-for=\"(article, i) in list\"\n          :key=\"i\"\n          :article=\"article\"\n        ></article-item>\n        <!-- <van-cell v-for=\"item in list\" :key=\"item.art_id\" :title=\"item.title\" /> -->\n      </van-list>\n    </van-pull-refresh>\n  </div>\n</template>\n\n<script>\nimport ArticleItem from '@/components/ArticleItem/index.vue'\nexport default {\n  name: 'ArticleList',\n  props: {\n    channel: {\n      type: Object,\n      required: true\n    }\n  },\n  components: {\n    ArticleItem\n  },\n  data() {\n    return {\n      list: [],\n      loading: false,\n      finished: false,\n      channel_id: this.channel.id,\n      timestamp: this.timestamp || Date.now(),\n      with_top: 1,\n      error: false,\n      isRefreshing: false\n    }\n  },\n  methods: {\n    // onLoad() {},\n    async onLoad() {\n      try {\n        const { data: res } = await this.$axios.get('v1_1/articles', {\n          params: {\n            channel_id: this.channel.id,\n            timestamp: this.timestamp,\n            with_top: this.with_top\n          }\n        })\n        this.list.push(...res.data.results)\n        this.loading = false\n        if (res.data.results.length) {\n          this.timestamp = res.data.pre_timestamp\n        } else {\n          this.finished = true\n        }\n      } catch (err) {\n        this.error = true\n        this.loading = false\n      }\n    },\n    async onRefresh() {\n      try {\n        const { data: res } = await this.$axios.get('v1_1/articles', {\n          params: {\n            channel_id: this.channel.id,\n            timestamp: Date.now(),\n            with_top: this.with_top\n          }\n        })\n        this.list.unshift(...res.data.results)\n        this.isRefreshing = false\n        if (res.data.results.length) {\n          this.timestamp = res.data.pre_timestamp\n        } else {\n          this.finished = true\n        }\n      } catch (err) {\n        this.error = true\n        this.loading = false\n      }\n    }\n  },\n  created() {}\n}\n</script>\n\n<style lang=\"less\" scoped>\n.articleList {\n  height: 79vh;\n  overflow-y: auto;\n}\n</style>\n"],"sourceRoot":"src/views/home/components"}]}