{"remainingRequest":"/Users/yanmaohua/Desktop/toutiao/toutiao/node_modules/thread-loader/dist/cjs.js!/Users/yanmaohua/Desktop/toutiao/toutiao/node_modules/babel-loader/lib/index.js!/Users/yanmaohua/Desktop/toutiao/toutiao/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/yanmaohua/Desktop/toutiao/toutiao/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yanmaohua/Desktop/toutiao/toutiao/src/components/FollowBtn/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yanmaohua/Desktop/toutiao/toutiao/src/components/FollowBtn/index.vue","mtime":1632316340976},{"path":"/Users/yanmaohua/Desktop/toutiao/toutiao/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanmaohua/Desktop/toutiao/toutiao/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanmaohua/Desktop/toutiao/toutiao/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/yanmaohua/Desktop/toutiao/toutiao/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanmaohua/Desktop/toutiao/toutiao/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy95YW5tYW9odWEvRGVza3RvcC90b3V0aWFvL3RvdXRpYW8vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmV4cG9ydCBkZWZhdWx0IHsKICBwcm9wczogewogICAgY29udGVudDogewogICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgdHlwZTogW09iamVjdF0KICAgIH0KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBidG5fbG9hZGluZzogZmFsc2UKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBmb2xsb3c6IGZ1bmN0aW9uIGZvbGxvdygpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX3RoaXMuYnRuX2xvYWRpbmcgPSB0cnVlOwoKICAgICAgICAgICAgICAgIGlmIChfdGhpcy5jb250ZW50LmlzX2ZvbGxvd2VkKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMzsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDI7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNTsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy4kYXhpb3MucG9zdCgndjFfMC91c2VyL2ZvbGxvd2luZ3MnLCB7CiAgICAgICAgICAgICAgICAgIHRhcmdldDogX3RoaXMuY29udGVudC5hdXRfaWQKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICAvLyB0aGlzLmNvbnRlbnQuaXNfZm9sbG93ZWQgPSAhdGhpcy5jb250ZW50LmlzX2ZvbGxvd2VkCiAgICAgICAgICAgICAgICBfdGhpcy4kZW1pdCgnZm9sbG93Q2hhbmdlJyk7CgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDExOwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSA4OwogICAgICAgICAgICAgICAgX2NvbnRleHQudDAgPSBfY29udGV4dFsiY2F0Y2giXSgyKTsKCiAgICAgICAgICAgICAgICBpZiAoX2NvbnRleHQudDAucmVzcG9uc2UgJiYgX2NvbnRleHQudDAucmVzcG9uc2Uuc3RhdHVzID09PSA0MDApIHsKICAgICAgICAgICAgICAgICAgX3RoaXMuJHRvYXN0LmZhaWwoJ+S4jeiDveWFs+azqOiHquW3sScpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDIxOwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMTM7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTY7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuJGF4aW9zLmRlbGV0ZSgidjFfMC91c2VyL2ZvbGxvd2luZ3MvIi5jb25jYXQoX3RoaXMuY29udGVudC5hdXRfaWQpKTsKCiAgICAgICAgICAgICAgY2FzZSAxNjoKICAgICAgICAgICAgICAgIC8vIHRoaXMuY29udGVudC5pc19mb2xsb3dlZCA9ICF0aGlzLmNvbnRlbnQuaXNfZm9sbG93ZWQKICAgICAgICAgICAgICAgIF90aGlzLiRlbWl0KCdmb2xsb3dDaGFuZ2UnKTsKCiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjE7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAxOToKICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAxOTsKICAgICAgICAgICAgICAgIF9jb250ZXh0LnQxID0gX2NvbnRleHRbImNhdGNoIl0oMTMpOwoKICAgICAgICAgICAgICBjYXNlIDIxOgogICAgICAgICAgICAgICAgX3RoaXMuYnRuX2xvYWRpbmcgPSBmYWxzZTsKCiAgICAgICAgICAgICAgY2FzZSAyMjoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUsIG51bGwsIFtbMiwgOF0sIFsxMywgMTldXSk7CiAgICAgIH0pKSgpOwogICAgfQogIH0KfTs="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAyBA,eAAA;AACA,EAAA,KAAA,EAAA;AACA,IAAA,OAAA,EAAA;AACA,MAAA,QAAA,EAAA,IADA;AAEA,MAAA,IAAA,EAAA,CAAA,MAAA;AAFA;AADA,GADA;AAOA,EAAA,IAPA,kBAOA;AACA,WAAA;AACA,MAAA,WAAA,EAAA;AADA,KAAA;AAGA,GAXA;AAYA,EAAA,OAAA,EAAA;AACA,IAAA,MADA,oBACA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,gBAAA,KAAA,CAAA,WAAA,GAAA,IAAA;;AADA,oBAEA,KAAA,CAAA,OAAA,CAAA,WAFA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA,uBAIA,KAAA,CAAA,MAAA,CAAA,IAAA,CAAA,sBAAA,EAAA;AACA,kBAAA,MAAA,EAAA,KAAA,CAAA,OAAA,CAAA;AADA,iBAAA,CAJA;;AAAA;AAOA;AACA,gBAAA,KAAA,CAAA,KAAA,CAAA,cAAA;;AARA;AAAA;;AAAA;AAAA;AAAA;;AAUA,oBAAA,YAAA,QAAA,IAAA,YAAA,QAAA,CAAA,MAAA,KAAA,GAAA,EAAA;AACA,kBAAA,KAAA,CAAA,MAAA,CAAA,IAAA,CAAA,QAAA;AACA;;AAZA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA,uBAgBA,KAAA,CAAA,MAAA,CAAA,MAAA,gCACA,KAAA,CAAA,OAAA,CAAA,MADA,EAhBA;;AAAA;AAmBA;AACA,gBAAA,KAAA,CAAA,KAAA,CAAA,cAAA;;AApBA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAuBA,gBAAA,KAAA,CAAA,WAAA,GAAA,KAAA;;AAvBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAwBA;AAzBA;AAZA,CAAA","sourcesContent":["<template>\n  <van-button\n    class=\"follow-btn\"\n    type=\"info\"\n    color=\"#3296fa\"\n    round\n    size=\"small\"\n    :loading=\"btn_loading\"\n    icon=\"plus\"\n    @click=\"follow\"\n    v-if=\"!content.is_followed\"\n    >关注</van-button\n  >\n  <van-button\n    class=\"follow-btn\"\n    round\n    size=\"small\"\n    :loading=\"btn_loading\"\n    @click=\"follow\"\n    v-else-if=\"content.is_followed\"\n    >已关注</van-button\n  >\n</template>\n\n<script>\nexport default {\n  props: {\n    content: {\n      required: true,\n      type: [Object]\n    }\n  },\n  data() {\n    return {\n      btn_loading: false\n    }\n  },\n  methods: {\n    async follow() {\n      this.btn_loading = true\n      if (!this.content.is_followed) {\n        try {\n          await this.$axios.post('v1_0/user/followings', {\n            target: this.content.aut_id\n          })\n          // this.content.is_followed = !this.content.is_followed\n          this.$emit('followChange')\n        } catch (err) {\n          if (err.response && err.response.status === 400) {\n            this.$toast.fail('不能关注自己')\n          }\n        }\n      } else {\n        try {\n          await this.$axios.delete(\n            `v1_0/user/followings/${this.content.aut_id}`\n          )\n          // this.content.is_followed = !this.content.is_followed\n          this.$emit('followChange')\n        } catch (err) {}\n      }\n      this.btn_loading = false\n    }\n  }\n}\n</script>\n\n<style>\n</style>\n"],"sourceRoot":"src/components/FollowBtn"}]}