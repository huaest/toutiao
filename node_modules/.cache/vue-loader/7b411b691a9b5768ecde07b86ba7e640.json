{"remainingRequest":"/Users/yanmaohua/Desktop/toutiao/toutiao/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yanmaohua/Desktop/toutiao/toutiao/src/views/search/components/SearchAdvice.vue?vue&type=style&index=0&id=44f817f1&lang=less&scoped=true&","dependencies":[{"path":"/Users/yanmaohua/Desktop/toutiao/toutiao/src/views/search/components/SearchAdvice.vue","mtime":1632225610611},{"path":"/Users/yanmaohua/Desktop/toutiao/toutiao/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanmaohua/Desktop/toutiao/toutiao/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/yanmaohua/Desktop/toutiao/toutiao/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/yanmaohua/Desktop/toutiao/toutiao/node_modules/less-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanmaohua/Desktop/toutiao/toutiao/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanmaohua/Desktop/toutiao/toutiao/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKL2RlZXAvIHNwYW4gLmFjdGl2ZSB7CiAgY29sb3I6IHJnYigzMiwgMTU2LCAyNDApICFpbXBvcnRhbnQ7Cn0K"},{"version":3,"sources":["SearchAdvice.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+DA;AACA;AACA","file":"SearchAdvice.vue","sourceRoot":"src/views/search/components","sourcesContent":["<template>\n  <div>\n    <van-cell\n      v-for=\"(v, index) in adviceList\"\n      :key=\"index\"\n      @click=\"$emit('search', v)\"\n      icon=\"search\"\n      clickable\n    >\n      <span slot=\"title\" v-html=\"highlight(v)\"></span>\n    </van-cell>\n  </div>\n</template>\n\n<script>\nimport { debounce } from 'lodash'\n\nexport default {\n  props: {\n    searchText: {\n      require: true,\n      type: String\n    }\n  },\n  data() {\n    return {\n      adviceList: []\n    }\n  },\n  methods: {\n    async getAdvice() {\n      const { data: res } = await this.$axios.get('v1_0/suggestion', {\n        params: {\n          q: this.searchText\n        }\n      })\n\n      this.adviceList = res.data.options\n    },\n    highlight(v) {\n      // 如何动态的使用正则表达式？\n      const reg = new RegExp(this.searchText, 'gi')\n      // （v1，v2）  v1=被替换   v2=要替换成\n      return v.replace(reg, `<span class=\"active\">${this.searchText}</span>`)\n    }\n  },\n  // 监听属性的使用\n  watch: {\n    searchText: {\n      // 设置防抖，debounce\n      // 第一个参数是一个函数\n      // 第二个参数是一个延迟时间，只要再触发就会再延迟这么多时间\n      handler: debounce(function (v) {\n        this.getAdvice()\n      }, 200),\n      // 重要！！！\n      // 组件还没渲染出来就监听\n      immediate: true\n    }\n  }\n}\n</script>\n<style lang=\"less\" scoped>\n/deep/ span .active {\n  color: rgb(32, 156, 240) !important;\n}\n</style>\n"]}]}