{"remainingRequest":"/Users/yanmaohua/Desktop/toutiao/toutiao/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yanmaohua/Desktop/toutiao/toutiao/src/views/userInfo/components/UpdateImg.vue?vue&type=style&index=0&id=474c177b&lang=less&scoped=true&","dependencies":[{"path":"/Users/yanmaohua/Desktop/toutiao/toutiao/src/views/userInfo/components/UpdateImg.vue","mtime":1632475418064},{"path":"/Users/yanmaohua/Desktop/toutiao/toutiao/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanmaohua/Desktop/toutiao/toutiao/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/yanmaohua/Desktop/toutiao/toutiao/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/yanmaohua/Desktop/toutiao/toutiao/node_modules/less-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanmaohua/Desktop/toutiao/toutiao/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanmaohua/Desktop/toutiao/toutiao/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLmJjIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiBibGFjazsKICBoZWlnaHQ6IDEwMCU7CiAgd2lkdGg6IDEwMCU7CiAgaW1nIHsKICAgIG1heC13aWR0aDogMTAwJTsKICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgIHRvcDogNTAlOwogICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC01MCUpOwogIH0KICAudG9vbEJhciB7CiAgICBwb3NpdGlvbjogZml4ZWQ7CiAgICBsZWZ0OiAwOwogICAgcmlnaHQ6IDA7CiAgICBib3R0b206IDA7CiAgICBkaXNwbGF5OiBmbGV4OwogICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOwogICAgLm9rLAogICAgLmNhbmNlbCB7CiAgICAgIHBhZGRpbmc6IDEwcHg7CiAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOwogICAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgICB3aWR0aDogNjBweDsKICAgICAgaGVpZ2h0OiA2MHB4OwogICAgICBmb250LXNpemU6IDMwcHg7CiAgICAgIGNvbG9yOiB3aGl0ZTsKICAgIH0KICB9Cn0K"},{"version":3,"sources":["UpdateImg.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"UpdateImg.vue","sourceRoot":"src/views/userInfo/components","sourcesContent":["<template>\n  <div class=\"bc\">\n    <img :src=\"img\" alt=\"\" ref=\"img\" />\n    <div class=\"toolBar\">\n      <div class=\"cancel\" @click=\"$emit('closeImg')\">取消</div>\n      <div class=\"ok\" @click=\"sub\">完成</div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport 'cropperjs/dist/cropper.css'\nimport Cropper from 'cropperjs'\nexport default {\n  props: {\n    img: {\n      required: true,\n      type: [String, Object]\n    }\n  },\n  data() {\n    return {\n      cropper: null\n    }\n  },\n  methods: {\n    cancel() {},\n    sub() {\n      this.$toast.loading('正在保存')\n      this.cropper.getCroppedCanvas().toBlob(async (blob) => {\n        const formdata = new FormData()\n        formdata.append('photo', blob)\n        try {\n          const { data: res } = await this.$axios.patch(\n            'v1_0/user/photo',\n            formdata\n          )\n          this.$toast.success('保存成功')\n          this.$emit('changeImg', res.photo)\n        } catch (err) {\n          this.$toast.fail('保存失败')\n        }\n      })\n    }\n  },\n  mounted() {\n    const image = this.$refs.img\n    this.cropper = new Cropper(image, {\n      aspectRatio: 1,\n      viewMode: 1,\n      dragMode: 'move',\n      cropBoxMovable: false,\n      cropBoxResizable: false,\n      background: false\n    })\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.bc {\n  background-color: black;\n  height: 100%;\n  width: 100%;\n  img {\n    max-width: 100%;\n    position: absolute;\n    top: 50%;\n    transform: translateY(-50%);\n  }\n  .toolBar {\n    position: fixed;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    display: flex;\n    justify-content: space-between;\n    .ok,\n    .cancel {\n      padding: 10px;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      width: 60px;\n      height: 60px;\n      font-size: 30px;\n      color: white;\n    }\n  }\n}\n</style>\n"]}]}