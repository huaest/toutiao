{"remainingRequest":"/Users/yanmaohua/Desktop/toutiao/toutiao/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yanmaohua/Desktop/toutiao/toutiao/src/views/search/components/SearchAdvice.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yanmaohua/Desktop/toutiao/toutiao/src/views/search/components/SearchAdvice.vue","mtime":1632225610611},{"path":"/Users/yanmaohua/Desktop/toutiao/toutiao/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanmaohua/Desktop/toutiao/toutiao/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanmaohua/Desktop/toutiao/toutiao/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/yanmaohua/Desktop/toutiao/toutiao/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanmaohua/Desktop/toutiao/toutiao/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGRlYm91bmNlIH0gZnJvbSAnbG9kYXNoJwoKZXhwb3J0IGRlZmF1bHQgewogIHByb3BzOiB7CiAgICBzZWFyY2hUZXh0OiB7CiAgICAgIHJlcXVpcmU6IHRydWUsCiAgICAgIHR5cGU6IFN0cmluZwogICAgfQogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGFkdmljZUxpc3Q6IFtdCiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBhc3luYyBnZXRBZHZpY2UoKSB7CiAgICAgIGNvbnN0IHsgZGF0YTogcmVzIH0gPSBhd2FpdCB0aGlzLiRheGlvcy5nZXQoJ3YxXzAvc3VnZ2VzdGlvbicsIHsKICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgIHE6IHRoaXMuc2VhcmNoVGV4dAogICAgICAgIH0KICAgICAgfSkKCiAgICAgIHRoaXMuYWR2aWNlTGlzdCA9IHJlcy5kYXRhLm9wdGlvbnMKICAgIH0sCiAgICBoaWdobGlnaHQodikgewogICAgICAvLyDlpoLkvZXliqjmgIHnmoTkvb/nlKjmraPliJnooajovr7lvI/vvJ8KICAgICAgY29uc3QgcmVnID0gbmV3IFJlZ0V4cCh0aGlzLnNlYXJjaFRleHQsICdnaScpCiAgICAgIC8vIO+8iHYx77yMdjLvvIkgIHYxPeiiq+abv+aNoiAgIHYyPeimgeabv+aNouaIkAogICAgICByZXR1cm4gdi5yZXBsYWNlKHJlZywgYDxzcGFuIGNsYXNzPSJhY3RpdmUiPiR7dGhpcy5zZWFyY2hUZXh0fTwvc3Bhbj5gKQogICAgfQogIH0sCiAgLy8g55uR5ZCs5bGe5oCn55qE5L2/55SoCiAgd2F0Y2g6IHsKICAgIHNlYXJjaFRleHQ6IHsKICAgICAgLy8g6K6+572u6Ziy5oqW77yMZGVib3VuY2UKICAgICAgLy8g56ys5LiA5Liq5Y+C5pWw5piv5LiA5Liq5Ye95pWwCiAgICAgIC8vIOesrOS6jOS4quWPguaVsOaYr+S4gOS4quW7tui/n+aXtumXtO+8jOWPquimgeWGjeinpuWPkeWwseS8muWGjeW7tui/n+i/meS5iOWkmuaXtumXtAogICAgICBoYW5kbGVyOiBkZWJvdW5jZShmdW5jdGlvbiAodikgewogICAgICAgIHRoaXMuZ2V0QWR2aWNlKCkKICAgICAgfSwgMjAwKSwKICAgICAgLy8g6YeN6KaB77yB77yB77yBCiAgICAgIC8vIOe7hOS7tui/mOayoea4suafk+WHuuadpeWwseebkeWQrAogICAgICBpbW1lZGlhdGU6IHRydWUKICAgIH0KICB9Cn0K"},{"version":3,"sources":["SearchAdvice.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;AAeA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"SearchAdvice.vue","sourceRoot":"src/views/search/components","sourcesContent":["<template>\n  <div>\n    <van-cell\n      v-for=\"(v, index) in adviceList\"\n      :key=\"index\"\n      @click=\"$emit('search', v)\"\n      icon=\"search\"\n      clickable\n    >\n      <span slot=\"title\" v-html=\"highlight(v)\"></span>\n    </van-cell>\n  </div>\n</template>\n\n<script>\nimport { debounce } from 'lodash'\n\nexport default {\n  props: {\n    searchText: {\n      require: true,\n      type: String\n    }\n  },\n  data() {\n    return {\n      adviceList: []\n    }\n  },\n  methods: {\n    async getAdvice() {\n      const { data: res } = await this.$axios.get('v1_0/suggestion', {\n        params: {\n          q: this.searchText\n        }\n      })\n\n      this.adviceList = res.data.options\n    },\n    highlight(v) {\n      // 如何动态的使用正则表达式？\n      const reg = new RegExp(this.searchText, 'gi')\n      // （v1，v2）  v1=被替换   v2=要替换成\n      return v.replace(reg, `<span class=\"active\">${this.searchText}</span>`)\n    }\n  },\n  // 监听属性的使用\n  watch: {\n    searchText: {\n      // 设置防抖，debounce\n      // 第一个参数是一个函数\n      // 第二个参数是一个延迟时间，只要再触发就会再延迟这么多时间\n      handler: debounce(function (v) {\n        this.getAdvice()\n      }, 200),\n      // 重要！！！\n      // 组件还没渲染出来就监听\n      immediate: true\n    }\n  }\n}\n</script>\n<style lang=\"less\" scoped>\n/deep/ span .active {\n  color: rgb(32, 156, 240) !important;\n}\n</style>\n"]}]}