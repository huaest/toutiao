{"remainingRequest":"/Users/yanmaohua/Desktop/toutiao/toutiao/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yanmaohua/Desktop/toutiao/toutiao/src/views/article/components/CommentList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yanmaohua/Desktop/toutiao/toutiao/src/views/article/components/CommentList.vue","mtime":1632471644229},{"path":"/Users/yanmaohua/Desktop/toutiao/toutiao/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanmaohua/Desktop/toutiao/toutiao/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/yanmaohua/Desktop/toutiao/toutiao/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanmaohua/Desktop/toutiao/toutiao/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBDb21tZW50SXRlbSBmcm9tICdAL3ZpZXdzL2FydGljbGUvY29tcG9uZW50cy9Db21tZW50SXRlbScKZXhwb3J0IGRlZmF1bHQgewogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgZmluaXNoZWQ6IGZhbHNlLAogICAgICBvZmZzZXQ6IG51bGwsCiAgICAgIGxpbWl0OiAxMCwKICAgICAgdG90YWw6IDAKICAgIH0KICB9LAogIGNvbXBvbmVudHM6IHsKICAgIENvbW1lbnRJdGVtCiAgfSwKICBwcm9wczogewogICAgYXJ0aWNsZUlkOiB7CiAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICB0eXBlOiBbT2JqZWN0LCBOdW1iZXIsIFN0cmluZ10KICAgIH0sCiAgICBjb21tZW50TGlzdDogewogICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgLy8g6buY6K6k5YC8CiAgICAgIGRlZmF1bHQ6ICgpID0+IFtdCiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBhc3luYyBvbkxvYWQoKSB7CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgeyBkYXRhOiByZXMgfSA9IGF3YWl0IHRoaXMuJGF4aW9zLmdldCgndjFfMC9jb21tZW50cycsIHsKICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICB0eXBlOiAnYScsCiAgICAgICAgICAgIHNvdXJjZTogdGhpcy5hcnRpY2xlSWQsCiAgICAgICAgICAgIG9mZnNldDogdGhpcy5vZmZzZXQsCiAgICAgICAgICAgIGxpbWl0OiB0aGlzLmxpbWl0CiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICBpZiAocmVzLmRhdGEucmVzdWx0cy5sZW5ndGgpIHsKICAgICAgICAgIHRoaXMub2Zmc2V0ID0gcmVzLmRhdGEubGFzdF9pZAogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLm9mZnNldCA9IG51bGwKICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlCiAgICAgICAgICB0aGlzLmZpbmlzaGVkID0gdHJ1ZQogICAgICAgIH0KICAgICAgICB0aGlzLmNvbW1lbnRMaXN0LnB1c2goLi4ucmVzLmRhdGEucmVzdWx0cykKICAgICAgICB0aGlzLnRvdGFsID0gcmVzLmRhdGEudG90YWxfY291bnQKICAgICAgICB0aGlzLiRlbWl0KCdjb21tZW50TnVtJywgdGhpcy50b3RhbCkKICAgICAgfSBjYXRjaCAoZXJyKSB7fQogICAgfQogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMub25Mb2FkKCkKICB9Cn0K"},{"version":3,"sources":["CommentList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAgBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CommentList.vue","sourceRoot":"src/views/article/components","sourcesContent":["<template>\n  <van-list\n    v-model=\"loading\"\n    :finished=\"finished\"\n    finished-text=\"没有更多了\"\n    @load=\"onLoad\"\n  >\n    <comment-item\n      v-for=\"(v, i) in commentList\"\n      :key=\"i\"\n      :comment=\"v\"\n    ></comment-item>\n  </van-list>\n</template>\n\n<script>\nimport CommentItem from '@/views/article/components/CommentItem'\nexport default {\n  data() {\n    return {\n      loading: false,\n      finished: false,\n      offset: null,\n      limit: 10,\n      total: 0\n    }\n  },\n  components: {\n    CommentItem\n  },\n  props: {\n    articleId: {\n      required: true,\n      type: [Object, Number, String]\n    },\n    commentList: {\n      required: true,\n      // 默认值\n      default: () => []\n    }\n  },\n  methods: {\n    async onLoad() {\n      try {\n        const { data: res } = await this.$axios.get('v1_0/comments', {\n          params: {\n            type: 'a',\n            source: this.articleId,\n            offset: this.offset,\n            limit: this.limit\n          }\n        })\n        if (res.data.results.length) {\n          this.offset = res.data.last_id\n        } else {\n          this.offset = null\n          this.loading = false\n          this.finished = true\n        }\n        this.commentList.push(...res.data.results)\n        this.total = res.data.total_count\n        this.$emit('commentNum', this.total)\n      } catch (err) {}\n    }\n  },\n  created() {\n    this.onLoad()\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n</style>\n"]}]}