{"remainingRequest":"/Users/yanmaohua/Desktop/toutiao/toutiao/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yanmaohua/Desktop/toutiao/toutiao/src/views/search/components/SearchResult.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yanmaohua/Desktop/toutiao/toutiao/src/views/search/components/SearchResult.vue","mtime":1632226853112},{"path":"/Users/yanmaohua/Desktop/toutiao/toutiao/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanmaohua/Desktop/toutiao/toutiao/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/yanmaohua/Desktop/toutiao/toutiao/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanmaohua/Desktop/toutiao/toutiao/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBwcm9wczogewogICAgc2VhcmNoVGV4dDogewogICAgICByZXF1aXJlOiB0cnVlLAogICAgICB0eXBlOiBTdHJpbmcKICAgIH0KICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBmaW5pc2hlZDogZmFsc2UsCiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICBwYWdlOiAxLAogICAgICBwZXJwYWdlOiAyMCwKICAgICAgcmVzdWx0TGlzdDogW10KICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGFzeW5jIGdldFJlc3VsdCgpIHt9LAogICAgLy8g6L+Z5LiA5Liq5Y+q6KaB5LiA5Yqg6L295bCx5Lya6LCD55SoCiAgICBhc3luYyBvbkxvYWQoKSB7CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgeyBkYXRhOiByZXMgfSA9IGF3YWl0IHRoaXMuJGF4aW9zLmdldCgndjFfMC9zZWFyY2gnLCB7CiAgICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgICAgcGFnZTogdGhpcy5wYWdlLAogICAgICAgICAgICBwZXJfcGFnZTogdGhpcy5wZXJwYWdlLAogICAgICAgICAgICBxOiB0aGlzLnNlYXJjaFRleHQKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIHRoaXMucmVzdWx0TGlzdC5wdXNoKC4uLnJlcy5kYXRhLnJlc3VsdHMpCiAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2UKICAgICAgICBpZiAocmVzLmRhdGEucmVzdWx0cy5sZW5ndGgpIHsKICAgICAgICAgIHRoaXMucGFnZSsrCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuZmluaXNoZWQgPSB0cnVlCiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICB0aGlzLiR0b2FzdC5mYWlsKCfmlbDmja7ojrflj5blpLHotKUnKQogICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlCiAgICAgICAgdGhpcy5maW5pc2hlZCA9IHRydWUKICAgICAgfQogICAgfQogIH0KfQo="},{"version":3,"sources":["SearchResult.vue"],"names":[],"mappings":";;;;;;;;;;;;;;AAcA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"SearchResult.vue","sourceRoot":"src/views/search/components","sourcesContent":["<template>\n  <div>\n    <van-list\n      v-model=\"loading\"\n      :finished=\"finished\"\n      finished-text=\"没有更多了\"\n      @load=\"onLoad\"\n    >\n      <van-cell v-for=\"(v, i) in resultList\" :key=\"i\" :title=\"v.title\" />\n    </van-list>\n  </div>\n</template>\n\n<script>\nexport default {\n  props: {\n    searchText: {\n      require: true,\n      type: String\n    }\n  },\n  data() {\n    return {\n      finished: false,\n      loading: false,\n      page: 1,\n      perpage: 20,\n      resultList: []\n    }\n  },\n  methods: {\n    async getResult() {},\n    // 这一个只要一加载就会调用\n    async onLoad() {\n      try {\n        const { data: res } = await this.$axios.get('v1_0/search', {\n          params: {\n            page: this.page,\n            per_page: this.perpage,\n            q: this.searchText\n          }\n        })\n        this.resultList.push(...res.data.results)\n        this.loading = false\n        if (res.data.results.length) {\n          this.page++\n        } else {\n          this.finished = true\n        }\n      } catch (err) {\n        this.$toast.fail('数据获取失败')\n        this.loading = false\n        this.finished = true\n      }\n    }\n  }\n}\n</script>\n<style lang=\"less\" scoped>\n</style>\n"]}]}