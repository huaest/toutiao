{"remainingRequest":"/Users/yanmaohua/Desktop/toutiao/toutiao/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yanmaohua/Desktop/toutiao/toutiao/src/views/home/components/ArticleList.vue?vue&type=style&index=0&id=06cb72be&lang=less&scoped=true&","dependencies":[{"path":"/Users/yanmaohua/Desktop/toutiao/toutiao/src/views/home/components/ArticleList.vue","mtime":1632296861883},{"path":"/Users/yanmaohua/Desktop/toutiao/toutiao/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanmaohua/Desktop/toutiao/toutiao/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/yanmaohua/Desktop/toutiao/toutiao/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/yanmaohua/Desktop/toutiao/toutiao/node_modules/less-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanmaohua/Desktop/toutiao/toutiao/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yanmaohua/Desktop/toutiao/toutiao/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5hcnRpY2xlTGlzdCB7CiAgaGVpZ2h0OiA3OXZoOwogIG92ZXJmbG93LXk6IGF1dG87Cn0K"},{"version":3,"sources":["ArticleList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuGA;AACA;AACA;AACA","file":"ArticleList.vue","sourceRoot":"src/views/home/components","sourcesContent":["<template>\n  <div class=\"articleList\">\n    <!-- pullfresh 要放在外面 -->\n    <van-pull-refresh\n      v-model=\"isRefreshing\"\n      @refresh=\"onRefresh\"\n      success-duration=\"500\"\n      success-text=\"刷新成功\"\n    >\n      <van-list\n        v-model=\"loading\"\n        :finished=\"finished\"\n        finished-text=\"没有更多了\"\n        :error.sync=\"error\"\n        error-text=\"请求失败，点击重新加载\"\n        @load=\"onLoad\"\n      >\n        <article-item\n          v-for=\"(article, i) in list\"\n          :key=\"i\"\n          :article=\"article\"\n        ></article-item>\n        <!-- <van-cell v-for=\"item in list\" :key=\"item.art_id\" :title=\"item.title\" /> -->\n      </van-list>\n    </van-pull-refresh>\n  </div>\n</template>\n\n<script>\nimport ArticleItem from '@/components/ArticleItem/index.vue'\nexport default {\n  name: 'ArticleList',\n  props: {\n    channel: {\n      type: Object,\n      required: true\n    }\n  },\n  components: {\n    ArticleItem\n  },\n  data() {\n    return {\n      list: [],\n      loading: false,\n      finished: false,\n      channel_id: this.channel.id,\n      timestamp: this.timestamp || Date.now(),\n      with_top: 1,\n      error: false,\n      isRefreshing: false\n    }\n  },\n  methods: {\n    // onLoad() {},\n    async onLoad() {\n      try {\n        const { data: res } = await this.$axios.get('v1_1/articles', {\n          params: {\n            channel_id: this.channel.id,\n            timestamp: this.timestamp,\n            with_top: this.with_top\n          }\n        })\n        this.list.push(...res.data.results)\n        this.loading = false\n        if (res.data.results.length) {\n          this.timestamp = res.data.pre_timestamp\n        } else {\n          this.finished = true\n        }\n      } catch (err) {\n        this.error = true\n        this.loading = false\n      }\n    },\n    async onRefresh() {\n      try {\n        const { data: res } = await this.$axios.get('v1_1/articles', {\n          params: {\n            channel_id: this.channel.id,\n            timestamp: Date.now(),\n            with_top: this.with_top\n          }\n        })\n        this.list.unshift(...res.data.results)\n        this.isRefreshing = false\n        if (res.data.results.length) {\n          this.timestamp = res.data.pre_timestamp\n        } else {\n          this.finished = true\n        }\n      } catch (err) {\n        this.error = true\n        this.loading = false\n      }\n    }\n  },\n  created() {}\n}\n</script>\n\n<style lang=\"less\" scoped>\n.articleList {\n  height: 79vh;\n  overflow-y: auto;\n}\n</style>\n"]}]}