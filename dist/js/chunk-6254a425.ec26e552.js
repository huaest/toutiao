(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6254a425"],{"0278":function(t,e,n){"use strict";n("cdfd")},"159b":function(t,e,n){var o=n("da84"),a=n("fdbc"),r=n("785a"),c=n("17c2"),i=n("9112"),s=function(t){if(t&&t.forEach!==c)try{i(t,"forEach",c)}catch(e){t.forEach=c}};for(var l in a)s(o[l]&&o[l].prototype);s(r)},"17c2":function(t,e,n){"use strict";var o=n("b727").forEach,a=n("a640"),r=a("forEach");t.exports=r?[].forEach:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}},"230c":function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"article-container"},[n("van-nav-bar",{staticClass:"page-nav-bar",attrs:{"left-arrow":"",title:"黑马头条"},on:{"click-left":t.onClickLeft}}),n("div",{staticClass:"main-wrap"},[t.isLoading?n("div",{staticClass:"loading-wrap"},[n("van-loading",{attrs:{color:"#3296fa",vertical:""}},[t._v("加载中")])],1):t.content.title?n("div",{staticClass:"article-detail"},[n("h1",{staticClass:"article-title"},[t._v(t._s(t.content.title))]),n("van-cell",{staticClass:"user-info",attrs:{center:"",border:!1}},[n("van-image",{staticClass:"avatar",attrs:{slot:"icon",round:"",fit:"cover",src:t.content.aut_photo},slot:"icon"}),n("div",{staticClass:"user-name",attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.content.aut_name))]),n("div",{staticClass:"publish-date",attrs:{slot:"label"},slot:"label"},[t._v(" "+t._s(t._f("computeTime")(t.content.pubdate))+" ")]),n("follow-btn",{staticClass:"follow-btn",attrs:{content:t.content},on:{followChange:function(e){t.content.is_followed=!t.content.is_followed}}})],1),n("div",{ref:"contentTree",staticClass:"article-content markdown-body",domProps:{innerHTML:t._s(t.content.content)}}),n("van-divider",[t._v("正文结束")]),n("van-popup",{style:{height:"20%"},attrs:{closeable:"","close-icon":"close",position:"bottom"},model:{value:t.showPop,callback:function(e){t.showPop=e},expression:"showPop"}},[n("comment-pop",{attrs:{target:t.content.art_id},on:{postSuccess:t.postSuccess}})],1),n("comment-list",{attrs:{articleId:t.content.art_id,commentList:t.commentList},on:{commentNum:t.changeNum}}),n("div",{staticClass:"article-bottom"},[n("van-button",{staticClass:"comment-btn",attrs:{type:"default",round:"",size:"small"},on:{click:function(e){t.showPop=!0}}},[t._v("写评论")]),n("van-icon",{attrs:{name:"comment-o",info:t.comNum,color:"#777"}}),n("collect-article",{attrs:{content:t.content,articleId:t.articleId},on:{changeCollect:function(e){t.content.is_collected=!t.content.is_collected}}}),n("like-article",{attrs:{content:t.content,articleId:t.articleId},on:{changeLike:t.changelike}}),n("van-icon",{attrs:{name:"share",color:"#777777"}})],1)],1):404==t.errStatus?n("div",{staticClass:"error-wrap"},[n("van-icon",{attrs:{name:"failure"}}),n("p",{staticClass:"text"},[t._v("该资源不存在或已删除！")])],1):n("div",{staticClass:"error-wrap"},[n("van-icon",{attrs:{name:"failure"}}),n("p",{staticClass:"text"},[t._v("内容加载失败！")]),n("van-button",{staticClass:"retry-btn",on:{click:t.getArticle}},[t._v("点击重试")])],1)])],1)},a=[],r=n("1da1"),c=(n("96cf"),n("a9e3"),n("159b"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.content.is_followed?t.content.is_followed?n("van-button",{staticClass:"follow-btn",attrs:{round:"",size:"small",loading:t.btn_loading},on:{click:t.follow}},[t._v("已关注")]):t._e():n("van-button",{staticClass:"follow-btn",attrs:{type:"info",color:"#3296fa",round:"",size:"small",loading:t.btn_loading,icon:"plus"},on:{click:t.follow}},[t._v("关注")])}),i=[],s={props:{content:{required:!0,type:[Object]}},data:function(){return{btn_loading:!1}},methods:{follow:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.btn_loading=!0,t.content.is_followed){e.next=13;break}return e.prev=2,e.next=5,t.$axios.post("v1_0/user/followings",{target:t.content.aut_id});case 5:t.$emit("followChange"),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](2),e.t0.response&&400===e.t0.response.status&&t.$toast.fail("不能关注自己");case 11:e.next=21;break;case 13:return e.prev=13,e.next=16,t.$axios.delete("v1_0/user/followings/".concat(t.content.aut_id));case 16:t.$emit("followChange"),e.next=21;break;case 19:e.prev=19,e.t1=e["catch"](13);case 21:t.btn_loading=!1;case 22:case"end":return e.stop()}}),e,null,[[2,8],[13,19]])})))()}}},l=s,u=n("2877"),d=Object(u["a"])(l,c,i,!1,null,null,null),f=d.exports,m=n("28a2"),p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("van-button",{class:[{"btn-item":!0},{collectColor:t.content.is_collected}],attrs:{icon:t.content.is_collected?"star":"star-o",loading:t.isLoading},on:{click:t.collect}})},v=[],b={props:{articleId:{required:!0,type:[Number,String,Object]},content:{required:!0,type:[Object]}},data:function(){return{isLoading:!1}},methods:{collect:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(console.log(t.content.aut_id),t.isLoading=!0,t.content.is_collected){e.next=14;break}return e.prev=3,e.next=6,t.$axios.post("v1_0/article/collections",{target:t.articleId});case 6:t.$emit("changeCollect"),t.isLoading=!1,e.next=12;break;case 10:e.prev=10,e.t0=e["catch"](3);case 12:e.next=18;break;case 14:return e.next=16,t.$axios.delete("v1_0/article/collections/".concat(t.articleId));case 16:t.$emit("changeCollect"),t.isLoading=!1;case 18:case"end":return e.stop()}}),e,null,[[3,10]])})))()}}},g=b,h=(n("6126"),Object(u["a"])(g,p,v,!1,null,"225626ae",null)),_=h.exports,w=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("van-button",{class:[{"btn-item":!0},{likeColor:1===t.content.attitude}],attrs:{icon:1===t.content.attitude?"good-job":"good-job-o",loading:t.isLoading},on:{click:t.like}})},k=[],x={props:{articleId:{required:!0,type:[Number,String,Object]},content:{required:!0,type:[Object]}},data:function(){return{isLoading:!1}},methods:{like:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var n,o,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.isLoading=!0,-1!==t.content.attitude){e.next=16;break}return e.prev=2,e.next=5,t.$axios.post("v1_0/article/likings",{target:t.articleId});case 5:n=e.sent,o=n.data,t.$emit("changeLike"),console.log(o),t.isLoading=!1,e.next=14;break;case 12:e.prev=12,e.t0=e["catch"](2);case 14:e.next=23;break;case 16:return e.next=18,t.$axios.delete("v1_0/article/likings/".concat(t.articleId));case 18:a=e.sent,r=a.data,console.log(r),t.$emit("changeLike"),t.isLoading=!1;case 23:case"end":return e.stop()}}),e,null,[[2,12]])})))()}}},y=x,C=(n("4025"),Object(u["a"])(y,w,k,!1,null,"ecf7969e",null)),I=C.exports,L=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.commentList,(function(t,e){return n("comment-item",{key:e,attrs:{comment:t}})})),1)},j=[],S=n("2909"),$=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("van-cell",{staticClass:"comment-item"},[n("van-image",{staticClass:"avatar",attrs:{slot:"icon",round:"",fit:"cover",src:"https://img.yzcdn.cn/vant/cat.jpeg"},slot:"icon"}),n("div",{staticClass:"title-wrap",attrs:{slot:"title"},slot:"title"},[n("div",{staticClass:"user-name"},[t._v(t._s(t.comment.aut_name))]),n("van-button",{staticClass:"like-btn",class:{like:t.comment.is_liking},attrs:{icon:t.comment.is_liking?"good-job":"good-job-o",loading:this.loading},on:{click:t.addLike}},[t._v(t._s(t.comment.like_count||"赞"))])],1),n("div",{attrs:{slot:"label"},slot:"label"},[n("p",{staticClass:"comment-content"},[t._v(t._s(t.comment.content))]),n("div",{staticClass:"bottom-info"},[n("span",{staticClass:"comment-pubdate"},[t._v(t._s(t._f("computeTime")(t.comment.pubdate)))]),n("van-button",{staticClass:"reply-btn",attrs:{round:""}},[t._v("回复 "+t._s(t.comment.reply_count))])],1)])],1)},A=[],N={props:{comment:{required:!0,tyep:Object}},data:function(){return{loading:!1}},methods:{addLike:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.loading=!0,e.prev=1,t.comment.is_liking){e.next=9;break}return e.next=5,t.$axios.post("v1_0/comment/likings",{target:t.comment.com_id});case 5:t.comment.is_liking=!0,t.comment.like_count++,e.next=13;break;case 9:return e.next=11,t.$axios.delete("v1_0/comment/likings/".concat(t.comment.com_id));case 11:t.comment.is_liking=!1,t.comment.like_count--;case 13:e.next=17;break;case 15:e.prev=15,e.t0=e["catch"](1);case 17:t.loading=!1;case 18:case"end":return e.stop()}}),e,null,[[1,15]])})))()}}},O=N,E=(n("ee8e"),Object(u["a"])(O,$,A,!1,null,"67ced272",null)),R=E.exports,T={data:function(){return{loading:!1,finished:!1,offset:null,limit:10,total:0}},components:{CommentItem:R},props:{articleId:{required:!0,type:[Object,Number,String]},commentList:{required:!0,default:function(){return[]}}},methods:{onLoad:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var n,o,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.get("v1_0/comments",{params:{type:"a",source:t.articleId,offset:t.offset,limit:t.limit}});case 3:o=e.sent,a=o.data,a.data.results.length?t.offset=a.data.last_id:(t.offset=null,t.loading=!1,t.finished=!0),(n=t.commentList).push.apply(n,Object(S["a"])(a.data.results)),t.total=a.data.total_count,t.$emit("commentNum",t.total),e.next=13;break;case 11:e.prev=11,e.t0=e["catch"](0);case 13:case"end":return e.stop()}}),e,null,[[0,11]])})))()}},created:function(){this.onLoad()}},q=T,P=Object(u["a"])(q,L,j,!1,null,"4736ca72",null),F=P.exports,M=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("van-field",{attrs:{rows:"2",autosize:"",label:"留言",type:"textarea",maxlength:"50",placeholder:"请输入留言","show-word-limit":""},model:{value:t.message,callback:function(e){t.message=e},expression:"message"}}),n("van-button",{staticClass:"sub-btn",attrs:{type:"primary",round:""},on:{click:t.subComment}},[t._v("主要按钮")])],1)},z=[],V={props:{target:{required:!0,type:[Number,String,Object]}},data:function(){return{message:""}},methods:{subComment:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.post("v1_0/comments",{target:t.target,content:t.message,art_id:null});case 3:n=e.sent,o=n.data,console.log(o),t.message="",t.$emit("postSuccess",o.data),e.next=12;break;case 10:e.prev=10,e.t0=e["catch"](0);case 12:case"end":return e.stop()}}),e,null,[[0,10]])})))()}}},G=V,U=(n("a461"),Object(u["a"])(G,M,z,!1,null,"68045726",null)),J=U.exports,X={data:function(){return{content:{},isLoading:!1,errStatus:0,comNum:0,showPop:!1,commentList:[]}},components:{FollowBtn:f,CollectArticle:_,LikeArticle:I,CommentList:F,CommentPop:J},props:{articleId:{required:!0,type:[Number,String,Object]}},methods:{getArticle:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.get("v1_0/articles/".concat(t.articleId));case 3:n=e.sent,o=n.data,t.content=o.data,setTimeout((function(){var e=t.$refs.contentTree,n=e.querySelectorAll("img"),o=[];n.forEach((function(t,e){o.push(t.src),t.onclick=function(){Object(m["a"])({images:o,startPosition:e})}}))}),0),t.isLoading=!1,e.next=14;break;case 10:e.prev=10,e.t0=e["catch"](0),e.t0.response&&404===e.t0.response.status&&(t.errStatus=404),t.isLoading=!1;case 14:case"end":return e.stop()}}),e,null,[[0,10]])})))()},onClickLeft:function(){this.$router.back()},changelike:function(){1===this.content.attitude?this.content.attitude=-1:-1===this.content.attitude&&(this.content.attitude=1)},changeNum:function(t){this.comNum=t},postSuccess:function(t){this.showPop=!1,this.comNum++,this.commentList.unshift(t.new_obj)}},created:function(){this.getArticle()}},Y=X,B=(n("0278"),Object(u["a"])(Y,o,a,!1,null,"3a7b70fa",null));e["default"]=B.exports},2909:function(t,e,n){"use strict";function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function a(t){if(Array.isArray(t))return o(t)}n.d(e,"a",(function(){return s}));n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0"),n("a630");function r(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}n("fb6a"),n("b0c0");function c(t,e){if(t){if("string"===typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}function i(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(t){return a(t)||r(t)||c(t)||i()}},4025:function(t,e,n){"use strict";n("b3a5")},"4df4":function(t,e,n){"use strict";var o=n("0366"),a=n("7b0b"),r=n("9bdd"),c=n("e95a"),i=n("50c4"),s=n("8418"),l=n("9a1f"),u=n("35a1");t.exports=function(t){var e,n,d,f,m,p,v=a(t),b="function"==typeof this?this:Array,g=arguments.length,h=g>1?arguments[1]:void 0,_=void 0!==h,w=u(v),k=0;if(_&&(h=o(h,g>2?arguments[2]:void 0,2)),void 0==w||b==Array&&c(w))for(e=i(v.length),n=new b(e);e>k;k++)p=_?h(v[k],k):v[k],s(n,k,p);else for(f=l(v,w),m=f.next,n=new b;!(d=m.call(f)).done;k++)p=_?r(f,h,[d.value,k],!0):d.value,s(n,k,p);return n.length=k,n}},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,n){var o=n("1d80"),a=n("577e"),r=n("5899"),c="["+r+"]",i=RegExp("^"+c+c+"*"),s=RegExp(c+c+"*$"),l=function(t){return function(e){var n=a(o(e));return 1&t&&(n=n.replace(i,"")),2&t&&(n=n.replace(s,"")),n}};t.exports={start:l(1),end:l(2),trim:l(3)}},6126:function(t,e,n){"use strict";n("cacb")},7156:function(t,e,n){var o=n("861d"),a=n("d2bb");t.exports=function(t,e,n){var r,c;return a&&"function"==typeof(r=e.constructor)&&r!==n&&o(c=r.prototype)&&c!==n.prototype&&a(t,c),t}},"9b43":function(t,e,n){},"9bdd":function(t,e,n){var o=n("825a"),a=n("2a62");t.exports=function(t,e,n,r){try{return r?e(o(n)[0],n[1]):e(n)}catch(c){a(t,"throw",c)}}},a461:function(t,e,n){"use strict";n("e434")},a630:function(t,e,n){var o=n("23e7"),a=n("4df4"),r=n("1c7e"),c=!r((function(t){Array.from(t)}));o({target:"Array",stat:!0,forced:c},{from:a})},a640:function(t,e,n){"use strict";var o=n("d039");t.exports=function(t,e){var n=[][t];return!!n&&o((function(){n.call(null,e||function(){throw 1},1)}))}},a9e3:function(t,e,n){"use strict";var o=n("83ab"),a=n("da84"),r=n("94ca"),c=n("6eeb"),i=n("5135"),s=n("c6b6"),l=n("7156"),u=n("d9b5"),d=n("c04e"),f=n("d039"),m=n("7c73"),p=n("241c").f,v=n("06cf").f,b=n("9bf2").f,g=n("58a8").trim,h="Number",_=a[h],w=_.prototype,k=s(m(w))==h,x=function(t){if(u(t))throw TypeError("Cannot convert a Symbol value to a number");var e,n,o,a,r,c,i,s,l=d(t,"number");if("string"==typeof l&&l.length>2)if(l=g(l),e=l.charCodeAt(0),43===e||45===e){if(n=l.charCodeAt(2),88===n||120===n)return NaN}else if(48===e){switch(l.charCodeAt(1)){case 66:case 98:o=2,a=49;break;case 79:case 111:o=8,a=55;break;default:return+l}for(r=l.slice(2),c=r.length,i=0;i<c;i++)if(s=r.charCodeAt(i),s<48||s>a)return NaN;return parseInt(r,o)}return+l};if(r(h,!_(" 0o1")||!_("0b1")||_("+0x1"))){for(var y,C=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof C&&(k?f((function(){w.valueOf.call(n)})):s(n)!=h)?l(new _(x(e)),n,C):x(e)},I=o?p(_):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),L=0;I.length>L;L++)i(_,y=I[L])&&!i(C,y)&&b(C,y,v(_,y));C.prototype=w,w.constructor=C,c(a,h,C)}},b0c0:function(t,e,n){var o=n("83ab"),a=n("9bf2").f,r=Function.prototype,c=r.toString,i=/^\s*function ([^ (]*)/,s="name";o&&!(s in r)&&a(r,s,{configurable:!0,get:function(){try{return c.call(this).match(i)[1]}catch(t){return""}}})},b3a5:function(t,e,n){},cacb:function(t,e,n){},cdfd:function(t,e,n){},d28b:function(t,e,n){var o=n("746f");o("iterator")},e01a:function(t,e,n){"use strict";var o=n("23e7"),a=n("83ab"),r=n("da84"),c=n("5135"),i=n("861d"),s=n("9bf2").f,l=n("e893"),u=r.Symbol;if(a&&"function"==typeof u&&(!("description"in u.prototype)||void 0!==u().description)){var d={},f=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof f?new u(t):void 0===t?u():u(t);return""===t&&(d[e]=!0),e};l(f,u);var m=f.prototype=u.prototype;m.constructor=f;var p=m.toString,v="Symbol(test)"==String(u("test")),b=/^Symbol\((.*)\)[^)]+$/;s(m,"description",{configurable:!0,get:function(){var t=i(this)?this.valueOf():this,e=p.call(t);if(c(d,t))return"";var n=v?e.slice(7,-1):e.replace(b,"$1");return""===n?void 0:n}}),o({global:!0,forced:!0},{Symbol:f})}},e434:function(t,e,n){},ee8e:function(t,e,n){"use strict";n("9b43")},fb6a:function(t,e,n){"use strict";var o=n("23e7"),a=n("861d"),r=n("e8b5"),c=n("23cb"),i=n("50c4"),s=n("fc6a"),l=n("8418"),u=n("b622"),d=n("1dde"),f=d("slice"),m=u("species"),p=[].slice,v=Math.max;o({target:"Array",proto:!0,forced:!f},{slice:function(t,e){var n,o,u,d=s(this),f=i(d.length),b=c(t,f),g=c(void 0===e?f:e,f);if(r(d)&&(n=d.constructor,"function"!=typeof n||n!==Array&&!r(n.prototype)?a(n)&&(n=n[m],null===n&&(n=void 0)):n=void 0,n===Array||void 0===n))return p.call(d,b,g);for(o=new(void 0===n?Array:n)(v(g-b,0)),u=0;b<g;b++,u++)b in d&&l(o,u,d[b]);return o.length=u,o}})}}]);
//# sourceMappingURL=chunk-6254a425.ec26e552.js.map